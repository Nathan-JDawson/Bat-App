<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Site Description</title>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheet.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.0/additional-methods.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="functions.js" type="text/javascript"></script>
    <script>
        jQuery(document).ready(() => {
            $("#buttons").load("buttons.html");

            $("#building_type").change(() => {
                let building = $("#building_type").val().toLowerCase();
                $("#load_options").load("options.html #" + building);
            })

            // set up validation for the form - uses jQuery Validate plugin
            $("#description_form").validate({
                
            })

            // need to use function here rather than => as 'this' is used
            $("#buttons").on("click", ":button", function(){
                if($("#description_form").valid()){
                    array = generate_array();
                    send_data(array);
                    if($(this).attr("id") === "button_1"){
                        window.location.replace("/client_details")
                    }else if($(this).attr("id") === "button_2"){
                        generate_report();
                    }else if($(this).attr("id") === "button_3"){
                        window.open('/download_report')
                    }
                }
            })

            // captures the form into an array/object
            const generate_array = () => {
                let array = {
                    
                };

                return array;
            }

            $("#add_another").click(() => {
                $("#building_single").clone().appendTo("#building_form");
            })

            $("#test").click(() => {
                let features = {
                    arable      : $("input[name = arable]:checked").val(),
                    flowing     : $("input[name = flowing]:checked").val(),
                    grassland  : $("input[name = grassland]:checked").val(),
                    hedgerows   : $("input[name = hedgerows]:checked").val(),
                    pasture     : $("input[name = pasture]:checked").val(),
                    scrubland   : $("input[name = scrubland]:checked").val(),
                    standing    : $("input[name = standing]:checked").val(),
                    woodland    : $("input[name = woodland]:checked").val(),
                };

                console.log(features);
            })
        });
    </script>
    <style>
        .panel-heading{
            cursor: pointer;
        }
        .center{
            text-align: center;
        }
        .vcenter{
            display: flex;
            align-items: center;
            text-align: center;
        }
    </style>
    </head>

    <body>
        <div class="container-fluid">
            <h1 class="text-center">Site Description</h1>
            <!--
                Values Needed:
                Location
                    Description
                    Land Use
                Building Type
                    Name (optional)
                    Type
                    Use
                Habitat
                    Types on site
                    Types in surrounding
                        Woodland
                        Hedgegrow
                        Waterbodies
                Transport
            -->
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading" id="heading_1">
                        <h3 class="panel-title" data-parent="#accordion" data-toggle="collapse" data-target="#location_collapse">Location</h4>
                    </div>
                    <div id="location_collapse" class="panel-collapse collapse">
                        <div class="panel-body">
                            <form id="location_form">
                                <div class="form-group">
                                    <div class="row">
                                        <label class="col-sm-3">Location Description:</label>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <select class="form-control" id="location_1">
                                                <option selected>Site Type...</option>
                                                <option>Rural</option>
                                                <option>Suburban</option>
                                                <option>Urban</option>
                                                <option>Industrial</option>
                                                <option>Commercial</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-1">
                                            <input class="form-control" type="text" placeholder="site" readonly>
                                        </div>
                                        <div class="col-sm-2">
                                            <select class="form-control" id="location_2">
                                                <option selected>Location...</option>
                                                <option>In</option>
                                                <option>Within</option>
                                                <option>Close to</option>
                                                <option>Adjacent to</option>
                                                <option>Edge of</option>
                                                <option>Outskirts of</option>
                                                <option>Centre of</option>
                                                <option>North of</option>
                                                <option>East of</option>
                                                <option>South of</option>
                                                <option>West of</option>
                                                <option>North East of</option>
                                                <option>North West of</option>
                                                <option>South East of</option>
                                                <option>South West of</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2">
                                            <input class="form-control" type="text" placeholder="the settlement" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label class="col-sm-3">Geographic Relation:</label>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <input class="form-control" type="number" id="distance" step="0.01"
                                                placeholder="Approximately... (km)">
                                        </div>
                                        <div class="col-sm-2">
                                            <select class="form-control" id="location_3">
                                                <option selected>Location...</option>
                                                <option>North of</option>
                                                <option>East of</option>
                                                <option>South of</option>
                                                <option>West of</option>
                                                <option>North East of</option>
                                                <option>North West of</option>
                                                <option>South East of</option>
                                                <option>South West of</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-2">
                                            <input class="form-control" type="text" id="major" placeholder="Major City/Area...">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title" data-parent="#accordion" data-toggle="collapse" data-target="#building_collapse">Building Type</h3>
                    </div>
                    <div id="building_collapse" class="panel-collapse collapse">
                        <div class="panel-body">
                            <form id="building_form">
                                <div id="building_single" class="form-group building">
                                    <div class="row">
                                        <label class="col-sm-3">Building Name:</label>
                                        <div class="col-sm-6">
                                            <input class="form-control" type="text" id="building_name">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3">Building Type:</label>
                                        <div class="col-sm-6">
                                            <select class="form-control" id="building_type">
                                                <option selected>Type...</option>
                                                <option>Agricultural</option>
                                                <option>Civic</option>
                                                <option>Commercial</option>
                                                <option>Educational</option>
                                                <option>Governmental</option>
                                                <option>Industrial</option>
                                                <option>Medical</option>
                                                <option>Parking</option>
                                                <option>Parking</option>
                                                <option>Religious</option>
                                                <option>Residential</option>
                                                <option>Transport</option>
                                            </select>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3">Building Use:</label>
                                        <div id="load_options" class="col-sm-6">
                                            <!-- load options based on what was selected before -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <label class="col-sm-3">Current Use:</label>
                                        <div class="col-sm-6">
                                            <select id="current_use" class="form-control">
                                                <option>Occupied</option>
                                                <option>Occupied</option>
                                                <option>Disused</option>
                                                <option>Deerelict</option>
                                                <option>Unknown</option>
                                            </select>
                                        </div>
                                    </div>
                                    <hr class="solid">
                                </div>
                            </form>
                            <div class="row">
                                <div class="col-sm-3">
                                    <button type="button" class="btn btn-default" id="add_another">Add building</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title" data-parent="#accordion" data-toggle="collapse" data-target="#habitat_collapse"">Habitat Features</h3>
                    </div>
                    <div id="habitat_collapse" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <form id="habitat_form">
                                <p class="lead text-center">On site and in the surrounding areas, how many of these features do you find...</p>
                                <!-- 
                                    Features:
                                    Arable land
                                    Flowing Water
                                    Grassland
                                    Hedgerows
                                    Pasture
                                    Scrubland
                                    Standing Water
                                    Woodland
                                -->
                                <div class="row vcenter">
                                    <label class="col-xs-3 center">Feature</label>
                                    <label class="col-xs-2 center">None</label>
                                    <label class="col-xs-2 center">Small Areas</label>
                                    <label class="col-xs-2 center">Serveral Areas</label>
                                    <label class="col-xs-2 center">Significant Areas</label>
                                </div>
                                <div class="row">
                                    <div id="arable" class="form-group vcenter">
                                        <label class="col-xs-3">Arable Land</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Flowing Water</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="flowing" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="flowing" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="flowing" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="flowing" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Grassland</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="grassland" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="grassland" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="grassland" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="grassland" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Hedgerows</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="hedgerows" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="hedgerows" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="hedgerows" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="hedgerows" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Pasture</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="pasture" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="pasture" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="pasture" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="pasture" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Scrubland</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="scrubland" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="scrubland" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="scrubland" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="scrubland" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Standing Water</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="standing" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="standing" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="standing" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="standing" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Woodland</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="woodland" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="woodland" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="woodland" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="woodland" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <button type="button" class="btn btn-default" id="test">Test</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" id="buttons">
                <!-- buttons.html will be loaded here -->
            </div>
        </div>
    </body>
</html>