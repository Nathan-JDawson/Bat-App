<!DOCTYPE html>
<html lang="en">
<head>
    <title>Exterior</title>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="stylesheet.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.0/additional-methods.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="functions.js" type="text/javascript"></script>
    <script>
        jQuery(document).ready(() => {
            $("#buttons").load("buttons.html");
            $("#back_button").load("back.html");

            // $("#walls_present").hide();

            $("#bat_wall_evidence").change(() => {
                let species = ["live bats", "dead bats", "droppings", "eDNA"]
                let evidence = $("#bat_wall_evidence").val();
                if(species.includes(evidence))
                    $("#load_species").load("bat_evidence_options.html #species");
                else
                    $("#load_species").html("");
            })

            $("input[name = walls]").change(() => {
                if($("#walls_yes").is(":checked")){
                    $("#walls_present").show();
                }else{
                    $("#walls_present").hide();
                }
            })

            // set up validation for the forms - uses jQuery Validate plugin
            let select_message = "Please select an option"
            $("#location_form").validate({
                
            })

            // need to use function here rather than => as 'this' is used
            $("#buttons").on("click", ":button", function () {
                if (valid) {
                    array = generate_array();
                    send_data(array);
                    if ($(this).attr("id") === "button_1") {
                        window.location.replace("/client_details")
                    } else if ($(this).attr("id") === "button_2") {
                        generate_report();
                    } else if ($(this).attr("id") === "button_3") {
                        window.open('/download_report')
                    }
                }
            })

            // captures the form into an array/object
            const generate_array = () => {
                let array = {

                    };

                return array;
            }
        });
    </script>
    <style>
        .panel-title[aria-expanded=false] .glyphicon-chevron-up{
            display: none;
        }
        .panel-title[aria-expanded=true] .glyphicon-chevron-down{
            display: none;
        }
        .panel-heading{
            cursor: pointer;
        }
        .vcenter{
            display: flex;
            align-items: center;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <h1 class="text-center">Exterior</h1>
        <div id="back_button"></div>
        <br>
        <!--
                Values Needed:
                Walls
                    Material
                    Condition
                    Features
                    Evidence
                    Potential
                Roof
                    Form
                    Material
                    Watertight?
                    Condition
                    Features
                        Description
                        Evidence
                        Potential
                Entrances
                    Windows
                        Condition
                        Matieral
                        Features
                        Evidence
                        Potential
                    Doorways
                        Condition
                        Material
                        Features
                        Evidence
                        Potential
            -->
        <div class="panel-group" id="accordion">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title" aria-expanded="false" data-parent="#accordion" data-toggle="collapse" data-target="#walls_collapse">
                        Walls
                        <span style="float: right;" class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                        <span style="float: right;" class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
                    </h3>
                </div>
                <div id="walls_collapse" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <form id="walls_form">
                            <div class="row">
                                <div class="col-xs-6">
                                    <label>Are walls present?</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="radio">
                                        <label><input type="radio" id="walls_yes" name="walls">Yes</label>
                                        <label><input type="radio" id="walls_no" name="walls" checked>No</label>
                                    </div>
                                </div>
                            </div>
                            <div id="walls_present">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <select class="form-control" id="wall_material" name="wall_material">
                                            <option value="" selected>Main Material...</option>
                                            <option value="brick">Brick</option>
                                            <option value="stone">Stone</option>
                                            <option value="timber">Timber</option>
                                            <option value="steel">Steel</option>
                                            <option value="render">Render</option>
                                            <option value="cladding">Cladding</option>
                                            <option value="hanging tiles">Hanging Tiles</option>
                                            <option value="weatherboarding">Weatherboarding</option>
                                            <option value="block">Block</option>
                                            <option value="shiplap">Shiplap</option>
                                            <option value="waney lap">Waney Lap</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <select class="form-control" id="wall_condition" name="wall_condition">
                                            <option value="" selected>Condition...</option>
                                            <option value="good">Good</option>
                                            <option value="moderate">Moderate</option>
                                            <option value="poor">Poor</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row vcenter">
                                    <label class="col-xs-3"></label>
                                    <label class="col-xs-2">None</label>
                                    <label class="col-xs-2">Some</label>
                                    <label class="col-xs-2">Several</label>
                                    <label class="col-xs-2">Many</label>
                                </div>
                                <div class="row">
                                    <div class="form-group vcenter">
                                        <label class="col-xs-3">Cracks</label>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="none" checked>
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="small">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="several">
                                        </div>
                                        <div class="col-xs-2">
                                            <input type="radio" class="form-control" name="arable" value="significant">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-6">
                                        <label>Evidence of bats found?</label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="radio">
                                            <label><input type="radio" id="bat_walls_yes" name="bat_walls">Yes</label>
                                            <label><input type="radio" id="bat_walls_no" name="bat_walls" checked>No</label>
                                        </div>
                                    </div>
                                </div>
                                <div id="bat_wall_evidence_div">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <select class="form-control" id="bat_wall_evidence" name="bat_wall_evidence">
                                                <option value="" selected>Evidence...</option>
                                                <option value="live bats">Live Bats</option>
                                                <option value="dead bats">Dead Bats</option>
                                                <option value="droppings">Droppings</option>
                                                <option value="urine staining">Urine Staining</option>
                                                <option value="fur oil staining">Fur Oil Staining</option>
                                                <option value="squeaking noises">Squeaking Noises</option>
                                                <option value="feeding reamins">Feeding Remains</option>
                                                <option value="bat flies">Bat Flies</option>
                                                <option value="eDNA">eDNA</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <div id="load_species">
                                                <!-- Load in the options for the species if needed -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-5">
                                            <select class="form-control" id="walls_evidence_amount" name="walls_evidence_amount">
                                                <option value="" selected>Amount...</option>
                                                <option value="small">Small</option>
                                                <option value="moderate">Moderate</option>
                                                <option value="large">Large</option>
                                            </select>
                                        </div>
                                        <div class="col-xs-2">
                                            <p class="lead text-center">or</p>
                                        </div>
                                        <div class="col-xs-5">
                                            <input class="form-control" type="number" step="1" min="0" id="walls_evidence_amount_num" name="walls_evidence_amount_num">
                                        </div>
                                    </div>
                                    <!-- Upload photo of evidence, allow caption to be added -->
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" id="buttons">
            <!-- buttons.html will be loaded here -->
        </div>
    </div>
</body>
</html>